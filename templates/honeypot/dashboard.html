<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Cyber Deception - Honeypot Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <style>
        /* Page-specific styles */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(0, 30, 0, 0.7);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.1);
            border: 1px solid rgba(0, 255, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 255, 0, 0.2);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #00ff00;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
        }
        
        .stat-label {
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(0, 255, 0, 0.7);
        }
        
        .honeypot-types {
            background: rgba(0, 20, 0, 0.5);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
        }
        
        .type-bar {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }
        
        .type-name {
            width: 150px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .bar-container {
            flex-grow: 1;
            height: 20px;
            background: rgba(0, 20, 0, 0.5);
            border-radius: 10px;
            margin: 0 15px;
            overflow: hidden;
        }
        
        .bar {
            height: 100%;
            background: linear-gradient(90deg, #00aa00, #00ff00);
            border-radius: 10px;
            transition: width 1s ease-out;
        }
        
        .bar-value {
            width: 50px;
            text-align: right;
        }
        
        .filters {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 20, 0, 0.5);
            border-radius: 8px;
        }
        
        .filter-group {
            display: flex;
            align-items: center;
        }
        
        .filter-label {
            margin-right: 10px;
        }
        
        .suspicious {
            position: relative;
        }
        
        .suspicious:after {
            content: '‚ö†Ô∏è';
            margin-left: 5px;
        }
        
        .search-input {
            padding: 8px 15px;
            width: 300px;
            border-radius: 20px;
            border: 1px solid rgba(0, 255, 0, 0.3);
            background: rgba(0, 20, 0, 0.7);
            color: #00ff00;
            outline: none;
        }
        
        .search-input:focus {
            border-color: #00ff00;
            box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>HONEYPOT ACTIVITY DASHBOARD</h1>
    </div>
    
    <div class="content">
        <div class="nav-links">
            <a href="/dashboard">üìä MAIN DASHBOARD</a> | 
            <a href="/ip-checker">üîç IP CHECKER</a> | 
            <a href="/logout">üö™ LOGOUT</a>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">Total Hits</div>
                <div class="stat-value">{{ stats.total_hits }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">Unique IPs</div>
                <div class="stat-value">{{ stats.unique_ips }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">Blocked IPs</div>
                <div class="stat-value">{{ stats.blocked_count }}</div>
            </div>
            
            <div class="stat-card">
                <div class="stat-label">Honeypot Types</div>
                <div class="stat-value">{{ stats.honeypot_types|length }}</div>
            </div>
        </div>
        
        <h2>HONEYPOT ACTIVITY BREAKDOWN</h2>
        
        <div class="honeypot-types">
            {% for honeypot, count in stats.honeypot_types.items() %}
            <div class="type-bar">
                <div class="type-name">{{ honeypot }}</div>
                <div class="bar-container">
                    <div class="bar" style="width: {{ (count / stats.total_hits * 100) if stats.total_hits > 0 else 0 }}%"></div>
                </div>
                <div class="bar-value">{{ count }}</div>
            </div>
            {% endfor %}
        </div>
        
        <div class="filters">
            <div class="filter-group">
                <label class="filter-label">Filter by:</label>
                <select id="honeypot-filter" class="filter-select">
                    <option value="">All Honeypots</option>
                    {% for honeypot in stats.honeypot_types %}
                    <option value="{{ honeypot }}">{{ honeypot }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="filter-group">
                <input type="text" id="search-input" class="search-input" placeholder="Search IP address...">
            </div>
        </div>
        
        <h2>HONEYPOT ACCESS LOGS</h2>
        
        <table id="honeypot-table">
            <thead>
                <tr>
                    <th>TIMESTAMP</th>
                    <th>IP ADDRESS</th>
                    <th>HONEYPOT</th>
                    <th>METHOD</th>
                    <th>DATA</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in logs|sort(attribute='time', reverse=true) %}
                <tr class="{% if entry.is_suspicious %}suspicious{% endif %}" data-honeypot="{{ entry.honeypot }}">
                    <td>{{ entry.time }}</td>
                    <td>{{ entry.ip }}</td>
                    <td>{{ entry.honeypot }}</td>
                    <td>{{ entry.method }}</td>
                    <td>{{ entry.data|truncate(50) }}</td>
                </tr>
                {% endfor %}
                {% if not logs %}
                <tr>
                    <td colspan="5" style="text-align: center;">No honeypot activity recorded yet</td>
                </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
    
    <script>
        // Filter functionality
        document.addEventListener('DOMContentLoaded', function() {
            const honeypotFilter = document.getElementById('honeypot-filter');
            const searchInput = document.getElementById('search-input');
            const table = document.getElementById('honeypot-table');
            const rows = table.querySelectorAll('tbody tr');
            
            // Animation for stat values
            const statValues = document.querySelectorAll('.stat-value');
            statValues.forEach(stat => {
                const finalValue = stat.textContent;
                stat.textContent = '0';
                
                let currentValue = 0;
                const targetValue = parseInt(finalValue);
                const duration = 1500; // ms
                const incrementValue = targetValue / (duration / 16);
                
                const counter = setInterval(() => {
                    currentValue += incrementValue;
                    if (currentValue >= targetValue) {
                        clearInterval(counter);
                        stat.textContent = finalValue;
                    } else {
                        stat.textContent = Math.floor(currentValue).toString();
                    }
                }, 16);
            });
            
            // Chart animations
            const bars = document.querySelectorAll('.bar');
            bars.forEach(bar => {
                const targetWidth = bar.style.width;
                bar.style.width = '0%';
                setTimeout(() => {
                    bar.style.width = targetWidth;
                }, 200);
            });
            
            // Filtering logic
            function filterTable() {
                const honeypotValue = honeypotFilter.value.toLowerCase();
                const searchValue = searchInput.value.toLowerCase();
                
                rows.forEach(row => {
                    if (row.cells.length <= 1) return; // Skip "no data" rows
                    
                    const honeypotType = row.getAttribute('data-honeypot').toLowerCase();
                    const ip = row.cells[1].textContent.toLowerCase();
                    
                    const matchesHoneypot = !honeypotValue || honeypotType === honeypotValue;
                    const matchesSearch = !searchValue || ip.includes(searchValue);
                    
                    row.style.display = (matchesHoneypot && matchesSearch) ? '' : 'none';
                });
            }
            
            honeypotFilter.addEventListener('change', filterTable);
            searchInput.addEventListener('input', filterTable);
        });
    </script>
</body>
</html> 